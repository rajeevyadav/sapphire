
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Public data access &#8212; SAPPHiRE 1.7.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/hisparc_style.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Nikhef Stoomboot facilities" href="qsub.html" />
    <link rel="prev" title="KASCADE data" href="kascade.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="qsub.html" title="Nikhef Stoomboot facilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="kascade.html" title="KASCADE data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SAPPHiRE 1.7.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="sapphire.html" accesskey="U">SAPPHiRE Reference</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-sapphire.publicdb">
<span id="public-data-access"></span><h1>Public data access<a class="headerlink" href="#module-sapphire.publicdb" title="Permalink to this headline">¶</a></h1>
<p>Fetch raw events and other data from the public database</p>
<p>This module enables you to access the public database and even the raw
event data. This is intended for specialized use only. For most uses, it is
faster and more convenient to access the event summary data (ESD) using
<a class="reference internal" href="esd.html#module-sapphire.esd" title="sapphire.esd"><code class="xref py py-mod docutils literal notranslate"><span class="pre">esd</span></code></a>.</p>
<dl class="function">
<dt id="sapphire.publicdb.get_publicdb_xmlrpc_url">
<code class="descclassname">sapphire.publicdb.</code><code class="descname">get_publicdb_xmlrpc_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sapphire.publicdb.get_publicdb_xmlrpc_url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sapphire.publicdb.download_data">
<code class="descclassname">sapphire.publicdb.</code><code class="descname">download_data</code><span class="sig-paren">(</span><em>file</em>, <em>group</em>, <em>station_id</em>, <em>start</em>, <em>end</em>, <em>get_blobs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#sapphire.publicdb.download_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Download raw data from the datastore</p>
<p>This function downloads data from the datastore, using the XML-RPC API
exposed by the public database.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file</strong> – The PyTables datafile handler</li>
<li><strong>group</strong> – The PyTables destination group, which need not exist</li>
<li><strong>station_id</strong> – The HiSPARC station number for which to get events</li>
<li><strong>start</strong> – a datetime instance defining the start of the search
interval</li>
<li><strong>end</strong> – a datetime instance defining the end of the search
interval</li>
<li><strong>get_blobs</strong> – boolean, select whether binary data like traces
should be fetched</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tables</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sapphire.publicdb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">tables</span><span class="o">.</span><span class="n">open_file</span><span class="p">(</span><span class="s1">&#39;data.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sapphire</span><span class="o">.</span><span class="n">publicdb</span><span class="o">.</span><span class="n">download_data</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;/s501&#39;</span><span class="p">,</span> <span class="mi">501</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
<span class="go">INFO:sapphire.publicdb:2010-09-01 00:00:00 None</span>
<span class="go">INFO:sapphire.publicdb:Getting server data URL (2010-09-01 00:00:00)</span>
<span class="go">INFO:sapphire.publicdb:Downloading data...</span>
<span class="go">INFO:sapphire.publicdb:Storing data...</span>
<span class="go">INFO:sapphire.publicdb:Done.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="sapphire.publicdb.datetimerange">
<code class="descclassname">sapphire.publicdb.</code><code class="descname">datetimerange</code><span class="sig-paren">(</span><em>start</em>, <em>stop</em><span class="sig-paren">)</span><a class="headerlink" href="#sapphire.publicdb.datetimerange" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for datetime ranges</p>
<p>This is a very specific generator for datetime ranges.  Based on a
start and stop value, it generates one day intervals.  On the first
and subsequent full days, it only returns a start value.  On the last
day, it returns a start and stop value.  See example below.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>start</strong> – a datetime instance</li>
<li><strong>stop</strong> – a datetime instance</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datetimerange</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="n">x</span>
<span class="gp">...</span>
<span class="go">(datetime.datetime(2010, 1, 1, 11, 0), datetime.datetime(2010, 1, 1, 13, 0))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datetimerange</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="n">x</span>
<span class="gp">...</span>
<span class="go">(datetime.datetime(2010, 1, 1, 11, 0), None)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datetimerange</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">13</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="n">x</span>
<span class="gp">...</span>
<span class="go">(datetime.datetime(2010, 1, 1, 11, 0), None)</span>
<span class="go">(datetime.datetime(2010, 1, 2, 0, 0), datetime.datetime(2010, 1, 2, 13, 0))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">datetimerange</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">13</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="n">x</span>
<span class="gp">...</span>
<span class="go">(datetime.datetime(2010, 1, 1, 11, 0), None)</span>
<span class="go">(datetime.datetime(2010, 1, 2, 0, 0), None)</span>
<span class="go">(datetime.datetime(2010, 1, 3, 0, 0), None)</span>
<span class="go">(datetime.datetime(2010, 1, 4, 0, 0), None)</span>
<span class="go">(datetime.datetime(2010, 1, 5, 0, 0), datetime.datetime(2010, 1, 5, 13, 0))</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/header.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="kascade.html"
                        title="previous chapter">KASCADE data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="qsub.html"
                        title="next chapter">Nikhef Stoomboot facilities</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="qsub.html" title="Nikhef Stoomboot facilities"
             >next</a> |</li>
        <li class="right" >
          <a href="kascade.html" title="KASCADE data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SAPPHiRE 1.7.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="sapphire.html" >SAPPHiRE Reference</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2009-2018, David Fokkema, Arne de Laat, and Tom Kooij.
    </div>
  </body>
</html>